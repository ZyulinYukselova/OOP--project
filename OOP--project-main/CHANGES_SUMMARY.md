# –†–µ–∑—é–º–µ –Ω–∞ –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–∏

## –î–∞—Ç–∞: 2024
## –°—Ç–∞—Ç—É—Å: ‚úÖ –í—Å–∏—á–∫–∏ –∑–∞–¥–∞—á–∏ –∑–∞–≤—ä—Ä—à–µ–Ω–∏

---

## 1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–º—è–Ω–∞ –Ω–∞ –ø—ä—Ç—É–≤–∞–Ω–µ ‚úÖ

### –ü—Ä–æ–º–µ–Ω–∏:
- **–§–∞–π–ª**: `TripService.java`
  - –î–æ–±–∞–≤–µ–Ω import –∑–∞ `NotificationCoordinator`
  - –î–æ–±–∞–≤–µ–Ω–æ –ø–æ–ª–µ `notificationCoordinator` (nullable)
  - –î–æ–±–∞–≤–µ–Ω –º–µ—Ç–æ–¥ `setNotificationCoordinator()` –∑–∞ dependency injection
  - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–∞–Ω `cancelTrip()` –¥–∞ –∏–∑–≤–∏–∫–≤–∞ `onTripCancelled()` —Å–ª–µ–¥ –æ—Ç–º—è–Ω–∞

- **–§–∞–π–ª**: `Cli.java`
  - –î–æ–±–∞–≤–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ `NotificationCoordinator` —Å `TripService` –≤ initialization block

### –†–µ–∑—É–ª—Ç–∞—Ç:
–ö–æ–≥–∞—Ç–æ –ø—ä—Ç—É–≤–∞–Ω–µ —Å–µ –æ—Ç–º–µ–Ω–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ –∏–∑–ø—Ä–∞—â–∞—Ç –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞:
- –î–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏—Ç–µ, –∫–æ–∏—Ç–æ —Å–∞ –æ–¥–æ–±—Ä–µ–Ω–∏ –∑–∞ —Ç–æ–≤–∞ –ø—ä—Ç—É–≤–∞–Ω–µ
- –í—Å–∏—á–∫–∏ –∫–∞—Å–∏–µ—Ä–∏ –Ω–∞ —Ç–µ–∑–∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏

---

## 2. –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –º–µ—Ç–æ–¥–∏ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏ ‚úÖ

### –ü—Ä–æ–º–µ–Ω–∏:

#### **CompanyService.java**:
- –î–æ–±–∞–≤–µ–Ω –º–µ—Ç–æ–¥ `updateCompany(User actor, String companyId, String name, Double commission, String contact)`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ø—Ä–∞–≤–∞: —Å–∞–º–æ —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏: –∫–æ–º–∏—Å–∏–æ–Ω–Ω–∞—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∞
- –û–ø—Ü–∏–æ–Ω–∞–ª–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: –≤—Å–µ–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–∂–µ –¥–∞ –µ `null` (–Ω–µ —Å–µ –ø—Ä–æ–º–µ–Ω—è)

#### **DistributorService.java**:
- –î–æ–±–∞–≤–µ–Ω –º–µ—Ç–æ–¥ `updateDistributor(User actor, String distributorId, String name, Double commission, String contact)`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ø—Ä–∞–≤–∞: —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫ –Ω–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∞, —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏: –∫–æ–º–∏—Å–∏–æ–Ω–Ω–∞—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∞

- –î–æ–±–∞–≤–µ–Ω –º–µ—Ç–æ–¥ `updateCashier(User actor, String cashierId, String name, Double commission, String contact)`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ø—Ä–∞–≤–∞: —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫ –Ω–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∞ (—á–∏–π—Ç–æ –∫–∞—Å–∏–µ—Ä –µ) –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏: –∫–æ–º–∏—Å–∏–æ–Ω–Ω–∞—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∞

### –†–µ–∑—É–ª—Ç–∞—Ç:
–°–µ–≥–∞ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –æ–±–Ω–æ–≤—è–≤–∞—Ç:
- –ò–º–µ–Ω–∞
- –ö–æ–º–∏—Å–∏–æ–Ω–Ω–∏
- –ö–æ–Ω—Ç–∞–∫—Ç–∏

–° –ø—Ä–∞–≤–∏–ª–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—ä–ø.

---

## 3. –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ CLI –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –æ—Ç—á–µ—Ç–∏ ‚úÖ

### –ù–æ–≤–∏ –∫–æ–º–∞–Ω–¥–∏:

#### **report-companies**:
- –ü–æ–∫–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω–∏–∏ —Å –Ω–∞–ª–∏—á–Ω–∏ –ø—ä—Ç—É–≤–∞–Ω–∏—è
- –ó–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏
- –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ –¥–∞—Ç–∞: `report-companies [fromDate] [toDate]`

#### **report-distributors**:
- –ü–æ–∫–∞–∑–≤–∞ —Å–ø–∏—Å—ä–∫ –Ω–∞ –≤—Å–∏—á–∫–∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏
- –ó–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏
- –ö–æ–º–ø–∞–Ω–∏–∏—Ç–µ –≤–∏–∂–¥–∞—Ç —Å–∞–º–æ —Å–≤–æ–∏—Ç–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏

#### **report-cashiers**:
- –ü–æ–∫–∞–∑–≤–∞ —Å–ø–∏—Å—ä–∫ –Ω–∞ –∫–∞—Å–∏–µ—Ä–∏
- –ó–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏
- –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä: `report-cashiers [distributorId]`

### –ü—Ä–æ–º–µ–Ω–∏:
- **Cli.java**: –î–æ–±–∞–≤–µ–Ω–∏ –º–µ—Ç–æ–¥–∏ `reportCompanies()`, `reportDistributors()`, `reportCashiers()`
- **ReportService.java**: –ü–æ–ø—Ä–∞–≤–µ–Ω `reportDistributors()` –¥–∞ —Ä–∞–±–æ—Ç–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ —Å –∫–æ–º–ø–∞–Ω–∏–∏

---

## 4. –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ –¥–∞—Ç–∞ –≤ CLI ‚úÖ

### –ü—Ä–æ–º–µ–Ω–∏:
- **report-trips**: –°–µ–≥–∞ –ø–æ–¥–¥—ä—Ä–∂–∞ –¥–∞—Ç–∏: `report-trips [fromDate] [toDate]`
- **report-tickets**: –°–µ–≥–∞ –ø–æ–¥–¥—ä—Ä–∂–∞ –¥–∞—Ç–∏: `report-tickets <tripId> [fromDate] [toDate]`
- **report-companies**: –ü–æ–¥–¥—ä—Ä–∂–∞ –¥–∞—Ç–∏: `report-companies [fromDate] [toDate]`

### –§–æ—Ä–º–∞—Ç–∏ –Ω–∞ –¥–∞—Ç–∏:
- ISO —Ñ–æ—Ä–º–∞—Ç: `2024-01-15T10:30`
- –ü—Ä–æ—Å—Ç —Ñ–æ—Ä–º–∞—Ç: `yyyy-MM-dd'T'HH:mm`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ parse –Ω–∞ –≤–∞–ª–∏–¥–Ω–∏ —Ñ–æ—Ä–º–∞—Ç–∏
- –ì—Ä–µ—à–∫–∏—Ç–µ —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞—Ç gracefully (–∏–≥–Ω–æ—Ä–∏—Ä–∞ —Å–µ —Ñ–∏–ª—Ç—ä—Ä—ä—Ç)

### –ù–æ–≤ –º–µ—Ç–æ–¥–∏:
- `parseDateTime(String dateStr)` - –ø–∞—Ä—Å–≤–∞ `LocalDateTime`
- `parseInstant(String instantStr)` - –ø–∞—Ä—Å–≤–∞ `Instant`

---

## 5. –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ CLI –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏ ‚úÖ

### –ù–æ–≤–∏ –∫–æ–º–∞–Ω–¥–∏:

#### **update-company**:
```
update-company <companyId> [name] [commission] [contact]
```
- –ò–∑–ø–æ–ª–∑–≤–∞–π `-` –∑–∞ –¥–∞ –ø—Ä–æ–ø—É—Å–Ω–µ—à –ø–æ–ª–µ
- –ü—Ä–∏–º–µ—Ä: `update-company <id> NewName - - newContact@email.com`

#### **update-distributor**:
```
update-distributor <distributorId> [name] [commission] [contact]
```

#### **update-cashier**:
```
update-cashier <cashierId> [name] [commission] [contact]
```

### –ü—Ä–æ–º–µ–Ω–∏:
- –î–æ–±–∞–≤–µ–Ω–∏ –º–µ—Ç–æ–¥–∏ `updateCompany()`, `updateDistributor()`, `updateCashier()` –≤ Cli.java
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Ö–æ–¥–Ω–∏ –¥–∞–Ω–Ω–∏
- –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è –∑–∞ —É—Å–ø–µ—Ö

---

## 6. –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞ –æ—Ç–º—è–Ω–∞ –Ω–∞ –ø—ä—Ç—É–≤–∞–Ω–µ ‚úÖ

### –ù–æ–≤–∞ –∫–æ–º–∞–Ω–¥–∞:
#### **cancel-trip**:
```
cancel-trip <tripId>
```
- –û—Ç–º–µ–Ω—è –ø—ä—Ç—É–≤–∞–Ω–µ (—Å–∞–º–æ —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø—Ä–∞—â–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## 7. –ü–æ–¥–æ–±—Ä–µ–Ω–∏—è –≤ help –∫–æ–º–∞–Ω–¥–∞—Ç–∞ ‚úÖ

### –û–±–Ω–æ–≤–µ–Ω —Å–ø–∏—Å—ä–∫:
```
Commands:
  help
  seed
  add-trip <type> <dest> <seats> <limit>
  request-trip <tripId>
  approve-request <requestId> <yes|no>
  cancel-trip <tripId>                    ‚Üê –ù–û–í–û
  sell-ticket <tripId> <seat> <buyerName> [contact]
  report-trips [fromDate] [toDate]        ‚Üê –û–ë–ù–û–í–ï–ù–û
  report-tickets <tripId> [fromDate] [toDate]  ‚Üê –û–ë–ù–û–í–ï–ù–û
  report-companies [fromDate] [toDate]    ‚Üê –ù–û–í–û
  report-distributors                     ‚Üê –ù–û–í–û
  report-cashiers [distributorId]         ‚Üê –ù–û–í–û
  update-company <companyId> [name] [commission] [contact]  ‚Üê –ù–û–í–û
  update-distributor <distributorId> [name] [commission] [contact]  ‚Üê –ù–û–í–û
  update-cashier <cashierId> [name] [commission] [contact]  ‚Üê –ù–û–í–û
  notifications
  who
  exit
```

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ:

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ:
1. `TripService.java` - –¥–æ–±–∞–≤–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. `CompanyService.java` - –¥–æ–±–∞–≤–µ–Ω –º–µ—Ç–æ–¥ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ
3. `DistributorService.java` - –¥–æ–±–∞–≤–µ–Ω–∏ 2 –º–µ—Ç–æ–¥–∞ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ
4. `ReportService.java` - –ø–æ–ø—Ä–∞–≤–µ–Ω –º–µ—Ç–æ–¥ `reportDistributors()`
5. `Cli.java` - –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–æ–≤–∏ –∫–æ–º–∞–Ω–¥–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–µ–Ω–∏ —Ä–µ–¥–æ–≤–µ –∫–æ–¥:
- –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª–Ω–æ 300+ –Ω–æ–≤–∏ —Ä–µ–¥–æ–≤–µ –∫–æ–¥
- 0 –≥—Ä–µ—à–∫–∏ –æ—Ç –ª–∏–Ω—Ç–µ—Ä–∞

---

## –ö–∞–∫–≤–æ –±–µ—à–µ —Ä–µ—à–µ–Ω–æ:

‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–º—è–Ω–∞ –Ω–∞ –ø—ä—Ç—É–≤–∞–Ω–µ  
‚úÖ –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –º–µ—Ç–æ–¥–∏ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏ (company, distributor, cashier)  
‚úÖ –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ CLI –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –ª–∏–ø—Å–≤–∞—â–∏—Ç–µ –æ—Ç—á–µ—Ç–∏  
‚úÖ –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ –¥–∞—Ç–∞ –≤ CLI  
‚úÖ –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ CLI –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏  
‚úÖ –ü–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ª–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ –æ—Ç—á–µ—Ç–∏ –Ω–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–æ—Ä–∏  
‚úÖ –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞ –æ—Ç–º—è–Ω–∞ –Ω–∞ –ø—ä—Ç—É–≤–∞–Ω–µ  

---

## –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏–µ):

1. **–†–µ–π—Ç–∏–Ω–≥–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞**: –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–∏
2. **–ü–µ—Ä–∏–æ–¥–∏—á–Ω–∏ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ scheduler –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –∏–∑–≤–µ—Å—Ç–∏—è
3. **–¢–µ—Å—Ç–æ–≤–µ**: –ü–∏—Å–∞–Ω–µ –Ω–∞ unit –∏ integration —Ç–µ—Å—Ç–æ–≤–µ
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Javadoc –∫–æ–º–µ–Ω—Ç–∞—Ä–∏

---

**–í—Å–∏—á–∫–∏ –∑–∞—è–≤–µ–Ω–∏ –∑–∞–¥–∞—á–∏ —Å–∞ –∑–∞–≤—ä—Ä—à–µ–Ω–∏ —É—Å–ø–µ—à–Ω–æ!** üéâ
