# Примерни данни за тестване - Система за управление на пътнически превози

## Стъпка по стъпка тестване

---

## 1. ИНИЦИАЛИЗАЦИЯ

Първо стартирайте системата. За да заредите примерни данни, изпълнете:

```
seed
```

След това проверете текущите потребители:
```
who
```

Съвет: Използвайте `help` за да видите всички налични команди.

---

## 2. РАБОТА С ПЪТУВАНИЯ

### 2.1 Създаване на пътуване

Използвайте `who` за да получите `companyId`.

```
add-trip Express Sofia 50 5
```

Резултат: Ще получите ID на пътуването. Запишете го!

### 2.2 Създаване на още пътувания

```
add-trip International Varna 30 3
add-trip Regional Plovdiv 40 4
add-trip Luxury Burgas 20 2
```

---

## 3. ЗАЯВКИ ЗА БИЛЕТИ

### 3.1 Заявка за продажба

Използвайте ID на пътуване от предишната стъпка:
```
request-trip <tripId>
```

Например (заменете с реалния ID):
```
request-trip trip-1
```

Резултат: Ще получите ID на заявката. Проверете известията!

### 3.2 Проверка на известия

```
notifications
```

Трябва да видите известие за нова заявка.

### 3.3 Одобряване на заявка

Използвайте ID на заявката:
```
approve-request <requestId> yes
```

Резултат: Заявката е одобрена и дистрибуторът може да продава билети.

---

## 4. ПРОДАЖБА НА БИЛЕТИ

### 4.1 Продажба на първи билет

Използвайте ID на пътуване и свободно място:
```
sell-ticket <tripId> 1 Иван Петров 0888123456
```

Резултат: Билетът е продаден и известие е изпратено на компанията!

### 4.2 Продажба на още билети

```
sell-ticket <tripId> 2 Мария Иванова 0888765432
sell-ticket <tripId> 3 Петър Георгиев 0888999888
sell-ticket <tripId> 4 Анна Стоянова 0888111222
sell-ticket <tripId> 5 Георги Димитров 0888333444
```

### 4.3 Проверка на известия след продажби

```
notifications
```

Трябва да видите известия за продадени билети за всяка продажба.

### 4.4 Тестване на лимита

Ако лимитът е 5, опитайте да продадете 6-ти билет на същия купувач:
```
sell-ticket <tripId> 6 Иван Петров 0888123456
```

Резултат: Трябва да получите грешка че лимитът е достигнат.

---

## 5. ОТЧЕТИ

### 5.1 Отчет за пътувания

```
report-trips
```

### 5.2 Отчет за билети на пътуване

```
report-tickets <tripId>
```

### 5.3 Отчет за компании (за дистрибутори)

```
report-companies
```

### 5.4 Отчет за дистрибутори

```
report-distributors
```

### 5.5 Отчет за касиери

```
report-cashiers
```

или с конкретен ID:
```
report-cashiers <distributorId>
```

---

## 6. УПРАВЛЕНИЕ НА ПРОФИЛИ

### 6.1 Обновяване на компания

Използвайте companyId от `who`:
```
update-company <companyId> Нова_Име - - нов@email.com
```

или обновете комисионна:
```
update-company <companyId> - 6.5 - 
```

### 6.2 Обновяване на дистрибутор

Използвайте distributorId от `who`:
```
update-distributor <distributorId> BestTicketsPlus 3.0 нов@dist.com
```

### 6.3 Обновяване на касиер

Използвайте cashierId от `who`:
```
update-cashier <cashierId> Каса1 1.5 касиер@example.com
```

---

## 7. ОЦЕНЯВАНЕ

### 7.1 Оценяване на компания

След като дистрибуторът има одобрени пътувания с компанията:
```
rate-company <companyId> 4.5
```

### 7.2 Оценяване на дистрибутор

След като компанията е одобрила заявки от дистрибутора:
```
rate-distributor <distributorId> 5.0
```

### 7.3 Оценяване на касиер

```
rate-cashier <cashierId> 4.0
```

### 7.4 Тестване на валидацията

Опитайте невалиден рейтинг:
```
rate-company <companyId> 6.0
```

Резултат: Трябва да получите грешка че рейтингът трябва да е между 1.0 и 5.0.

---

## 8. ИЗВЕСТИЯ

### 8.1 Проверка на всички известия

```
notifications
```

### 8.2 Проверка на наближаващи пътувания

Проверява за следващите 24 часа (по подразбиране):
```
check-upcoming-trips
```

Или за друг период:
```
check-upcoming-trips 48
```

Резултат: Ще видите броя проверени пътувания и изпратени известия.

---

## 9. ОТМЯНА НА ПЪТУВАНЕ

### 9.1 Отмяна на пътуване

```
cancel-trip <tripId>
```

Резултат: Пътуването е отменено и известия са изпратени на дистрибутори и касиери!

### 9.2 Проверка на известия след отмяна

```
notifications
```

Трябва да видите известия за отменено пътуване.

---

## 10. ПЪЛЕН СЦЕНАРИЙ ЗА ТЕСТВАНЕ

Следният набор от команди тества основните функционалности:

```
# 1. Проверка на текущите данни
who

# 2. Създаване на пътуване
add-trip Express Sofia 50 5

# 3. Заявка за билети (използвайте tripId от предишната команда)
request-trip <tripId>

# 4. Проверка на известия
notifications

# 5. Одобряване на заявка (използвайте requestId от заявката)
approve-request <requestId> yes

# 6. Продажба на няколко билета
sell-ticket <tripId> 1 Иван Петров 0888123456
sell-ticket <tripId> 2 Мария Иванова 0888765432
sell-ticket <tripId> 3 Петър Георгиев 0888999888

# 7. Проверка на отчети
report-trips
report-tickets <tripId>

# 8. Проверка на известия за продажби
notifications

# 9. Оценяване
rate-company <companyId> 4.5
rate-distributor <distributorId> 5.0
rate-cashier <cashierId> 4.0

# 10. Проверка на наближаващи пътувания
check-upcoming-trips 48

# 11. Отмяна на пътуване
cancel-trip <tripId>

# 12. Финален отчет на известия
notifications
```

---

## 11. ТЕСТВАНЕ НА ГРЕШКИ

### Тестване на валидация:

1. **Невалиден номер на място:**
```
sell-ticket <tripId> 100 Иван Петров 0888123456
```
Резултат: Грешка - номерът на мястото е извън обхвата

2. **Заето място:**
```
sell-ticket <tripId> 1 Друг Купувач 0888888888
```
Резултат: Грешка - мястото вече е заето

3. **Невалиден рейтинг:**
```
rate-company <companyId> 10.0
```
Резултат: Грешка - рейтингът трябва да е между 1.0 и 5.0

4. **Опит за оценяване без права:**
Ако дистрибутор опита да оцени компания с която не е работил:
```
rate-company <другаCompanyId> 4.0
```
Резултат: Грешка - може да оценява само компании с които е работил

---

## 12. ПОЛЕЗНИ СЪВЕТИ

1. **Записвайте ID-тата** - Използвайте `who` командата редовно за да видите ID-тата
2. **Проверявайте известията** - Използвайте `notifications` след важни операции
3. **Тествайте граничните случаи** - Опитайте да продадете всички места, да достигнете лимита и т.н.
4. **Използвайте help** - Командата `help` винаги показва списък с налични команди

---

## 13. ПРИМЕРНИ РЕЗУЛТАТИ

### Примерен изход от `who`:
```
============================================================
  ТЕКУЩИ ПОТРЕБИТЕЛИ И ОРГАНИЗАЦИИ
============================================================

ПОТРЕБИТЕЛИ:
  Администратор:  user-1 (admin@example.com)
  Компания:       user-2 (company@example.com)
  Дистрибутор:    user-3 (distributor@example.com)
  Касиер:         user-4 (cashier@example.com)

ОРГАНИЗАЦИИ:
  Компания ID:    comp-1
  Дистрибутор ID: dist-1
  Касиер ID:      cash-1

СЪВЕТ: Използвайте тези ID-та в командите!
```

### Примерен изход от `report-trips`:
```
============================================================
  ОТЧЕТ ЗА ПЪТУВАНИЯ
============================================================

   Намерени 3 пътувания:

   1. ID: trip-1
      Дестинация: Sofia
      Заминаване: 2024-01-19T10:00
      Пристигане: 2024-01-19T12:00
      Статус: ACTIVE
      Места: 50

   ...
```

---

## 14. ЧЕСТО СРЕЩАНИ ПРОБЛЕМИ

### Проблем: "Not found" грешка
**Решение:** Използвайте `who` за да видите правилните ID-та

### Проблем: "Access denied" грешка
**Решение:** Проверете дали използвате правилния потребител и права

### Проблем: "Seat already sold"
**Решение:** Използвайте друго място или друг tripId

### Проблем: "Not permitted to rate"
**Решение:** Уверете се че имате работна история с клиента (одобрени пътувания/заявки)

---

## 15. ПЪЛЕН ТЕСТОВ СЦЕНАРИЙ

Следващият набор команди тества всички функционалности последователно:

```
seed
who
add-trip Express Sofia 50 5
add-trip International Varna 30 3
report-trips
request-trip <tripId1>
notifications
approve-request <requestId> yes
sell-ticket <tripId1> 1 Иван Петров 0888123456
sell-ticket <tripId1> 2 Мария Иванова 0888765432
sell-ticket <tripId1> 3 Петър Георгиев 0888999888
notifications
report-tickets <tripId1>
rate-company <companyId> 4.5
report-companies
check-upcoming-trips 24
update-company <companyId> Нова_Име 6.0 нов@email.com
cancel-trip <tripId2>
notifications
exit
```

---

**Забележка:** Заменете `<tripId>`, `<companyId>`, `<requestId>` и т.н. с реалните ID-та от вашия `who` резултат!

**Нови кратки ID-та:** Системата вече използва кратки и разбираеми ID-та:
- Пътувания: `trip-1`, `trip-2`, `trip-3`...
- Билети: `ticket-1`, `ticket-2`, `ticket-3`...
- Заявки: `req-1`, `req-2`, `req-3`...
- Известия: `notif-1`, `notif-2`, `notif-3`...
- Компании: `comp-1`, `comp-2`...
- Дистрибутори: `dist-1`, `dist-2`...
- Касиери: `cash-1`, `cash-2`...
- Потребители: `user-1`, `user-2`...

Тези ID-та са много по-лесни за запомняне и използване!
